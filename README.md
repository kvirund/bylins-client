# Bylins MUD Client

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è MUD "–ë—ã–ª–∏–Ω—ã" –Ω–∞ Kotlin + Compose for Desktop.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (v0.13)
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –Ω–∞ Compose for Desktop
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ Telnet –∫ bylins.su:4000
- ‚úÖ **ANSI —Ü–≤–µ—Ç–∞** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (16/256/RGB), –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è VGA –ø–∞–ª–∏—Ç—Ä–∞
- ‚úÖ **MSDP –ø—Ä–æ—Ç–æ–∫–æ–ª** - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤** - regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $1-$9, gag, priority, colorize
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∞–ª–∏–∞—Å–æ–≤** - regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $0-$9, priority
- ‚úÖ **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏** - F1-F12, Numpad 0-9, Ctrl+, Alt+, Shift+ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- ‚úÖ **UI –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤/–∞–ª–∏–∞—Å–æ–≤/—Ö–æ—Ç–∫–µ–µ–≤** - –≤–∫–ª–∞–¥–∫–∏, –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ UI** - —Ñ–æ—Ä–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç JSON
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª** - —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø, —É–¥–∞–ª–µ–Ω–∏–µ ANSI –∫–æ–¥–æ–≤, –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–∏** - –≤—Ä–µ–º—è, –∫–æ–º–∞–Ω–¥—ã, –±–∞–π—Ç—ã, —Ç—Ä–∏–≥–≥–µ—Ä—ã, –∞–ª–∏–∞—Å—ã, —Ö–æ—Ç–∫–µ–∏, —Å—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** - #var/#unvar/#vars, –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ @varname –∏ ${varname}, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ config
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ: host, port, hp, mana, movement –∏ –≤—Å–µ MSDP –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: `#var target $1` (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç regex –≥—Ä—É–ø–ø—É)
- ‚úÖ **–≠—Ö–æ –∫–æ–º–∞–Ω–¥ –≤ –ª–æ–≥** - –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤–∏–¥–Ω—ã –≤ –≤—ã–≤–æ–¥–µ
- ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã, –∞–ª–∏–∞—Å—ã –∏ —Ö–æ—Ç–∫–µ–∏** - ready-to-use –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (HP/Mana/Move)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ (—Å—Ç—Ä–µ–ª–∫–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑, –∫—É—Ä—Å–æ—Ä –≤ –∫–æ–Ω—Ü–µ)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ (Enter)
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª–∞–¥–æ–∫** - redirect —Ç–µ–∫—Å—Ç–∞ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º, copy/move/only —Ä–µ–∂–∏–º—ã, UI —Å —Ç–∞–±–∞–º–∏
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ "–ö–∞–Ω–∞–ª—ã" –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π (–≥–æ–≤–æ—Ä–∏—Ç, —à–µ–ø—á–µ—Ç, –±–æ–ª—Ç–∞–ª–∫–∞)
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ regex –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫
  - **UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª–∞–¥–∫–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ **–ê–≤—Ç–æ–º–∞–ø–ø–µ—Ä** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
  - –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã—Ö–æ–¥–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ MSDP
  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (x, y, z) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —É—Ä–æ–≤–Ω–µ–π
  - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Canvas: drag –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è, zoom, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π
  - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç–µ–∫—É—â–µ–π/–ø–æ—Å–µ—â–µ–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ, –æ—á–∏—Å—Ç–∫–∞, –∑–∞–º–µ—Ç–∫–∏ –¥–ª—è –∫–æ–º–Ω–∞—Ç
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JavaScript (Python/Lua/Perl –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
  - JavaScript –¥–≤–∏–∂–æ–∫ (Nashorn/GraalVM) —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏
  - –°–æ–±—ã—Ç–∏—è: on_load, on_connect, on_disconnect, on_line, on_command, on_msdp, on_trigger, on_alias, on_room_enter
  - API: send(), echo(), addTrigger(), addAlias(), setTimeout(), setInterval(), getVariable(), setVariable()
  - MSDP API: getMsdpValue(), getAllMsdpData()
  - Mapper API: getCurrentRoom(), getRoomAt(), setRoomNote(), setRoomColor()
  - –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ scripts/
  - UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –∑–∞–≥—Ä—É–∑–∫–∞, –≤—ã–≥—Ä—É–∑–∫–∞, –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
  - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –≤ scripts/README.md

### –í –ø–ª–∞–Ω–∞—Ö
- üîÑ **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥–∞**:
  - Python –¥–≤–∏–∂–æ–∫ (GraalVM Python –∏–ª–∏ Jython)
  - Lua –¥–≤–∏–∂–æ–∫ (LuaJ)
  - Perl –¥–≤–∏–∂–æ–∫ (–≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å)
- üîÑ –£–ª—É—á—à–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞–ø–ø–µ—Ä–∞:
  - Speedwalk (#5n2e –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è)
  - –ü–æ–∏—Å–∫ –ø—É—Ç–∏ (pathfinding A*)
  - –ú–µ—Ç–∫–∏ –∏ —Ü–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç
  - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–∞—Ä—Ç –≤ JSON
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç (SQLite)
- üîÑ –ì—Ä–∞—Ñ–∏–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîÑ –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ (multi-language)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- JDK 17 –∏–ª–∏ –≤—ã—à–µ
- Gradle (wrapper –≤–∫–ª—é—á–µ–Ω)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
./gradlew run

# Windows
gradlew.bat run
```

### –°–±–æ—Ä–∫–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞

```bash
# –°–æ–∑–¥–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è —Ç–µ–∫—É—â–µ–π –û–°
./gradlew packageDistributionForCurrentOS

# –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –≤ build/compose/binaries/main/
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/main/kotlin/com/bylins/client/
‚îú‚îÄ‚îÄ Main.kt                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ MainWindow.kt            # –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
‚îÇ   ‚îî‚îÄ‚îÄ components/              # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ ConnectionPanel.kt   # –ü–∞–Ω–µ–ª—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ OutputPanel.kt       # –í—ã–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ InputPanel.kt        # –í–≤–æ–¥ –∫–æ–º–∞–Ω–¥
‚îÇ       ‚îî‚îÄ‚îÄ StatusPanel.kt       # –°—Ç–∞—Ç—É—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
‚îú‚îÄ‚îÄ network/
‚îÇ   ‚îú‚îÄ‚îÄ TelnetClient.kt          # Telnet –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ TelnetParser.kt          # –ü–∞—Ä—Å–µ—Ä Telnet –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
‚îú‚îÄ‚îÄ triggers/                    # –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ mapper/                      # –ê–≤—Ç–æ–º–∞–ø–ø–µ—Ä
‚îú‚îÄ‚îÄ stats/                       # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ logging/                     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ plugins/                     # –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `build.gradle.kts`:

```kotlin
dependencies {
    implementation("your.dependency:here:1.0.0")
}
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–ª–∏–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `mud.bylins.su:4000`. –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ UI.

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

–ö–ª–∏–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ **Python, Lua, JavaScript –∏ Perl**!

–ü–æ–ª–æ–∂–∏—Ç–µ —Å–≤–æ–∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `scripts/`:

**Python –ø—Ä–∏–º–µ—Ä** (`scripts/auto_heal.py`):
```python
def on_load(api):
    api.add_trigger(r"HP: (\d+)/(\d+)", check_hp)

def check_hp(api, match):
    hp, max_hp = int(match.group(1)), int(match.group(2))
    if hp < max_hp * 0.3:
        api.send("cast 'cure serious'")
```

**Lua –ø—Ä–∏–º–µ—Ä** (`scripts/auto_loot.lua`):
```lua
function on_load(api)
    api.add_trigger("^(.+) –º–µ—Ä—Ç–≤", on_kill)
end

function on_kill(api, match)
    api.send("–≤–∑—è—Ç—å –≤—Å–µ " .. match[1])
end
```

–°–º–æ—Ç—Ä–∏—Ç–µ `scripts/README.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
